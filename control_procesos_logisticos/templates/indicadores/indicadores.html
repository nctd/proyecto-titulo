{% extends 'base.html' %}

{% block content %}
<div class="container-xl">
    <!-- Page title -->
    <div class="page-header d-print-none">
        <div class="row align-items-center">
            <div class="col">
                <h2 class="page-title">
                    Indicadores
                </h2>
            </div>
        </div>
    </div>
</div>

<div class="page-body">
    <div class="container-xl">
        <div class="card">
            <div class="col-12">
                <div class="card-group nav nav-tabs flex-column flex-sm-row" data-bs-toggle="tabs">
                    <a href="#lineas-tipo-despacho" class="card text-center" data-bs-toggle="tab"
                        id='tab-tipo-despacho'>
                        <div class="card-body">
                            <p>Líneas a despachar según tipo de despacho</p>
                        </div>
                    </a>
                    <a href="#lineas-tipo-venta" class="card text-center" data-bs-toggle="tab" id="tab-tipo-venta">
                        <div class="card-body">
                            <p>Líneas a despachar según tipo de venta</p>
                        </div>
                    </a>
                    <a href="#estado-carga" class="card text-center" data-bs-toggle="tab" id="tab-carga">
                        <div class="card-body">
                            <p>Estado de carga por tarea</p>
                        </div>
                    </a>
                    <a href="#progreso-despacho" class="card text-center" data-bs-toggle="tab" id="tab-progreso">
                        <div class="card-body">
                            <p>Progreso diario de despachos</p>
                        </div>
                    </a>
                    <a href="#reportes-graficos" class="card text-center" data-bs-toggle="tab" id="tab-reportes">
                        <div class=" card-body">
                            <p>Reportes gráficos</p>
                        </div>
                    </a>

                </div>
            </div>
            <div class="card-body">
                <div class="tab-content">
                    <div class="tab-pane" id="lineas-tipo-despacho">

                        <div class="row row-deck row-cards">
                            <div class="card-header">
                                <h3 class="card-title">Lineas a despachar según tipo de despacho</h3>
                            </div>
                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-yellow-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>Despacho directo</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">1534</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">72%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            despacho
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">$37.243.459</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">34%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-yellow-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>Traspaso entre sucursales</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">1534</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">72%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            despacho
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">$37.243.459</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">34%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-yellow-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>Embalaje</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">1534</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">72%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            despacho
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">$37.243.459</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">34%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-yellow-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>Exportaciones</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">1534</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">72%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            despacho
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">$37.243.459</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">34%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-yellow-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>Retira cliente</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">1534</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">72%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            despacho
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">$37.243.459</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">34%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <span></span>
                        <!-- FIN TIPO DE DESPACHO -->

                    </div>

                    <div class="tab-pane" id="lineas-tipo-venta">
                        <div class="row row-deck row-cards">
                            <div class="card-header">
                                <h3 class="card-title">Lineas a despachar según tipo de venta</h3>
                            </div>

                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-lime-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>1STOCK_R</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            {{cant_stock_r}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_stock_r}}%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            venta
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            ${{val_stock_r}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_valor_stock_r}}%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-lime-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>1STOCK</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">{{cant_stock}}
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_stock}}%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            venta
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">${{val_stock}}
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_valor_stock}}%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-lime-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>2CALZADO</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            {{cant_calzado}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_calzado}}%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            venta
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            ${{val_calzado}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_valor_calzado}}%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-lime-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>2LIQUIDA</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            {{cant_liquida}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_liquida}}%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            venta
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            ${{val_liquida}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_valor_liquida}}%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-lime-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>2PROYECT</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            {{cant_proyect}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_proyect}}%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            venta
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            ${{val_proyect}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_valor_proyect}}%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-6">
                                <div class="card bg-lime-lt">
                                    <div class="card-body p-2">
                                        <div class="text-dark text-center">
                                            <h3>OS</h3>
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Cantidad de
                                                            lineas
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            {{cant_os}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_os}}%
                                                        </p>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <p class="float-lg-start" style="font-size: 1rem;">Ingresos por
                                                            venta
                                                            (CLP)
                                                        </p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end" style="font-size: 1rem;">
                                                            ${{val_os}}</p>
                                                    </div>
                                                    <div class="col-sm-3">
                                                        <p class="float-lg-end text-green" style="font-size: 1rem;">
                                                            {{prc_valor_os}}%
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <span></span>
                        <!-- FIN TIPO DE VENTA -->

                    </div>

                    <div class="tab-pane" id="estado-carga">

                        <div class="row row-deck row-cards">
                            <div class="card-header">
                                <h3 class="card-title">Estado de carga por tareas</h3>
                            </div>
                            <div class="col-sm-6 col-lg-3">
                                <div class="card">
                                    <div class="card-body p-2 text-center" data-bs-toggle="tooltip" data-bs-html="true"
                                        data-bs-placement="right"
                                        title="{% for lib in list_no_liberada %}<p class='tooltip-text'>{{lib}}</p> {% endfor %}"
                                        data-container='body'>
                                        <div class="text-end text-green">
                                            <span class="text-green d-inline-flex align-items-center lh-1"
                                                style="font-size: 19px;">
                                                {{prc_no_liberada}}%

                                            </span>
                                        </div>
                                        <div class="h1 m-0">{{ln_no_liberada}}</div>
                                        <div class="text-muted mb-3">Líneas no liberadas</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3">
                                <div class="card">
                                    <div class="card-body p-2 text-center" data-bs-toggle="tooltip" data-bs-html="true"
                                        data-bs-placement="right"
                                        title="{% for pick in list_picking %}<p class='tooltip-text'>{{pick}}</p> {% endfor %}"
                                        data-container='body'>
                                        <div class="text-end text-green">
                                            <span class="text-green d-inline-flex align-items-center lh-1"
                                                style="font-size: 19px;">
                                                {{prc_picking}}%

                                            </span>
                                        </div>
                                        <div class="h1 m-0">{{ln_picking}}</div>
                                        <div class="text-muted mb-3">Líneas en picking</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3">
                                <div class="card">
                                    <div class="card-body p-2 text-center" data-bs-toggle="tooltip" data-bs-html="true"
                                        data-bs-placement="right"
                                        title="{% for emb in list_embalaje %}<p class='tooltip-text'>{{emb}}</p> {% endfor %}"
                                        data-container='body'>
                                        <div class="text-end text-green">
                                            <span class="text-green d-inline-flex align-items-center lh-1"
                                                style="font-size: 19px;">
                                                {{prc_embalaje}}%

                                            </span>
                                        </div>
                                        <div class="h1 m-0">{{ln_embalaje}}</div>
                                        <div class="text-muted mb-3">Líneas en embalaje</div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-6 col-lg-3">

                                <div class="card">
                                    <div class="card-body p-2 text-center" data-bs-toggle="tooltip" data-bs-html="true"
                                        data-bs-placement="right"
                                        title="{% for rep in list_reparto %}<p class='tooltip-text'>{{rep}}</p> {% endfor %}"
                                        data-container='body'>
                                        <div class="text-end text-green">
                                            <span class="text-green d-inline-flex align-items-center lh-1"
                                                style="font-size: 19px;">
                                                {{prc_reparto}}%

                                            </span>
                                        </div>
                                        <div class="h1 m-0">{{ln_reparto}}</div>
                                        <div class="text-muted mb-3">Líneas en reparto</div>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>

                    <div class="tab-pane" id="progreso-despacho">

                        <div class="row">
                            <div class="card-header">
                                <h3 class="card-title">Progreso diario de despachos</h3>
                            </div>
                            <div class="btn-list">
                                <form method="POST" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <button href="#" class="btn btn-success d-none d-sm-inline-block" id='btn-guardar'
                                        type="submit">
                                        TEST
                                    </button>
                                </form>
                            </div>
                            <div class="col-12 p-3">
                                <div class="col-4 mb-3">
                                    <label class="form-label">Filtrar por:</label>
                                    <select type="text" class="form-select" id="select-progreso" value="">
                                        <option value="" disabled selected>Seleccionar tipo</option>
                                        <option value="1">Tipo de despacho</option>
                                        <option value="2">Tipo de venta</option>
                                    </select>
                                </div>
                                <div id='progreso-container'>

                                    <!-- <div class="form-group mb-4">
                                        <div class="col-6 col-sm-6">
                                            <label class="form-label col-form-label">Total de líneas
                                                planificadas</label>
                                            <div class="progress">
                                                {% if sum_lineas > 0 %}
                                                <div class="progress-bar" style="width: {{prc_exitosas}}%"
                                                    role="progressbar" aria-valuenow="38" aria-valuemin="0"
                                                    aria-valuemax="100">
                                                    <span class="text-dark text-h3">{{lineas_exitosas}}/{{sum_lineas}}
                                                        ({{prc_exitosas}}%)</span>
                                                </div>

                                                {% else %}
                                                <div class="progress-bar"
                                                    style="width:100%;background-color: #e6e8e9"" role=" progressbar"
                                                    aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">
                                                    <span class="text-dark text-h3">0/0 (0%)</span>
                                                </div>
                                                {% endif %}

                                            </div>

                                        </div>
                                    </div>

                                    <div class="form-group mb-4 row">
                                        <div class="col-6 col-sm-3">
                                            <label class="form-label col-form-label">Despachos directos</label>
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 38%" role="progressbar"
                                                    aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">
                                                    <span class="visually-hidden">38%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-6 col-sm-3">
                                            <label class="form-label col-form-label">Traspaso entre sucursales</label>
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 25%" role="progressbar"
                                                    aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">
                                                    <span class="visually-hidden">25%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group mb-4 row">
                                        <div class="col-6 col-sm-3">
                                            <label class="form-label col-form-label">Embalaje</label>
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 38%" role="progressbar"
                                                    aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">
                                                    <span class="visually-hidden">38%</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-6 col-sm-3">
                                            <label class="form-label col-form-label">Exportaciones</label>
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 38%" role="progressbar"
                                                    aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">
                                                    <span class="visually-hidden">38%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group mb-4 row">
                                        <div class="col-6 col-sm-3">
                                            <label class="form-label col-form-label">Retira cliente</label>
                                            <div class="progress">
                                                <div class="progress-bar" style="width: 55%" role="progressbar"
                                                    aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">
                                                    <span class="visually-hidden">55%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div> -->
                                </div>



                            </div>
                        </div>
                    </div>


                    <div class="tab-pane" id="reportes-graficos">

                        <div class="row">
                            <div class="card-header">
                                <h3 class="card-title">Reportes gráficos</h3>
                            </div>
                            <div class="col-12 p-3">
                                <div class='row'>

                                    <div class='col-xl-4 mb-3'>
                                        <label class="form-label">Filtrar por:</label>
                                        <select type="text" class="form-select" id="select-reporte" value="">
                                            <option value="" disabled selected>Seleccionar tipo</option>
                                            <option value="1">Tipo de despacho</option>
                                            <option value="2">Tipo de venta</option>
                                        </select>
                                    </div>
                                    <div class='col-xl-4 mb-3 offset-md-3'>
                                        <label class="form-label">Horizonte de tiempo:</label>
                                        <select type="text" class="form-select" id="select-horizonte" value="">
                                            <option value="" disabled selected>Seleccionar rango</option>
                                            <option value="1">Últimos 15 días</option>
                                            <option value="2">Últimos 30 días</option>
                                        </select>
                                    </div>
                                    <div id='reportes-container' class="col-lg-6 mt-3">
                                        <div class="card" id="reportes-card" style="display: none;">
                                            <div class="card-body">
                                                <h3 class="card-title">Cumplimiento 1STOCK</h3>
                                                <div id="chart-demo-line" class="chart-lg"></div>
                                            </div>
                                        </div>
                                    </div>



                                </div>
                            </div>
                        </div>

                    </div>
                </div>



            </div>
        </div>
    </div>
</div>

<div class="modal modal-blur fade" id="modal-error-indicadores" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-sm modal-dialog-centered" role="document">
        <div class="modal-content">
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            <div class="modal-status bg-danger"></div>
            <div class="modal-body text-center py-4">

                <svg xmlns="http://www.w3.org/2000/svg" class="icon mb-2 text-danger icon-lg" width="24" height="24"
                    viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M12 9v2m0 4v.01" />
                    <path
                        d="M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75" />
                </svg>
                <h3>Alerta</h3>
                <div class="text-muted">Error al guardar la planificación</div>
            </div>
            <div class="modal-footer">
                <div class="w-100">
                    <div class="row">

                        <div class="col"><a href="#" class="btn btn-danger w-100" data-bs-dismiss="modal">
                                OK
                            </a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $("#tab-tipo-despacho").on('click', function (e) {
        const tab = document.getElementById('tab-tipo-despacho')
        tab.classList.add('card-active')
        if ($('#tab-tipo-venta').hasClass('card-active')) {
            $('#tab-tipo-venta').removeClass('card-active')
        }
        if ($('#tab-carga').hasClass('card-active')) {
            $('#tab-carga').removeClass('card-active')
        }
        if ($('#tab-progreso').hasClass('card-active')) {
            $('#tab-progreso').removeClass('card-active')
        }
        if ($('#tab-reportes').hasClass('card-active')) {
            $('#tab-reportes').removeClass('card-active')
        }
    })
    $("#tab-tipo-venta").on('click', function (e) {
        const tab = document.getElementById('tab-tipo-venta')
        tab.classList.add('card-active')

        if ($('#tab-tipo-despacho').hasClass('card-active')) {
            $('#tab-tipo-despacho').removeClass('card-active')
        }

        if ($('#tab-carga').hasClass('card-active')) {
            $('#tab-carga').removeClass('card-active')
        }

        if ($('#tab-progreso').hasClass('card-active')) {
            $('#tab-progreso').removeClass('card-active')
        }
        if ($('#tab-reportes').hasClass('card-active')) {
            $('#tab-reportes').removeClass('card-active')
        }
    })
    $("#tab-carga").on('click', function (e) {
        const tab = document.getElementById('tab-carga')
        tab.classList.add('card-active')
        if ($('#tab-tipo-venta').hasClass('card-active')) {
            $('#tab-tipo-venta').removeClass('card-active')
        }
        if ($('#tab-tipo-despacho').hasClass('card-active')) {
            $('#tab-tipo-despacho').removeClass('card-active')
        }
        if ($('#tab-progreso').hasClass('card-active')) {
            $('#tab-progreso').removeClass('card-active')
        }
        if ($('#tab-reportes').hasClass('card-active')) {
            $('#tab-reportes').removeClass('card-active')
        }
    })
    $("#tab-progreso").on('click', function (e) {
        const tab = document.getElementById('tab-progreso')
        tab.classList.add('card-active')

        if ($('#tab-tipo-despacho').hasClass('card-active')) {
            $('#tab-tipo-despacho').removeClass('card-active')
        }

        if ($('#tab-tipo-venta').hasClass('card-active')) {
            $('#tab-tipo-venta').removeClass('card-active')
        }
        if ($('#tab-carga').hasClass('card-active')) {
            $('#tab-carga').removeClass('card-active')
        }

        if ($('#tab-reportes').hasClass('card-active')) {
            $('#tab-reportes').removeClass('card-active')
        }

        // document.getElementById('select-reporte').value = "";
        // const content = document.getElementById("reportes-card")
        // content.style.display = "none"


    })
    $("#tab-reportes").on('click', function (e) {
        const tab = document.getElementById('tab-reportes')
        tab.classList.add('card-active')

        if ($('#tab-tipo-despacho').hasClass('card-active')) {
            $('#tab-tipo-despacho').removeClass('card-active')
        }

        if ($('#tab-tipo-venta').hasClass('card-active')) {
            $('#tab-tipo-venta').removeClass('card-active')
        }
        if ($('#tab-carga').hasClass('card-active')) {
            $('#tab-carga').removeClass('card-active')
        }

        if ($('#tab-progreso').hasClass('card-active')) {
            $('#tab-progreso').removeClass('card-active')
        }
    })
</script>

<script>
    $('#select-progreso').on('change', function (e) {
        // alert(this.value);
        const container = document.getElementById("progreso-container")
        if (this.value == 1) {
            container.innerHTML = '<div class="form-group mb-4">' +
                '<div class="col-6 col-sm-6">' +
                '<label class="form-label col-form-label">Total de líneas planificadas</label>' +
                '<div class="progress">' +
                '{% if sum_lineas > 0 %}' +
                '<div class="progress-bar" style="width: {{prc_exitosas}}%" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">' +
                '<span>{{lineas_exitosas}}/{{sum_lineas}} ({{prc_exitosas}}%)</span>' +
                '{% else %}' +
                '<div class="progress-bar" style="width:100%;background-color: #e6e8e9"" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">' +
                '<span class="text-dark text-h3">0/0 (0%)</span>' +
                '{% endif %}' +
                '</div >' +
                '</div >' +

                '</div >' +
                '</div >' +

                '<div class="form-group mb-4 row">' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">Despachos directos</label>' +
                '<div class="progress">' +
                '<div class="progress-bar" style="width: 38%" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="visually-hidden">38%</span>' +
                '</div>' +
                '</div>' +
                '</div>' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">Traspasos entre sucursales</label>' +
                '<div class="progress">' +
                '<div class="progress-bar" style="width: 25%" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">' +
                '<span class="visually-hidden">25%</span>' +
                '</div>' +
                '</div>' +
                '</div>' +
                '</div>' +
                '<div class="form-group mb-4 row">' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">Embalaje</label>' +
                '<div class="progress">' +
                '<div class="progress-bar" style="width: 38%" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">' +
                '<span class="visually-hidden">38%</span>' +
                '</div>' +
                '</div>' +
                '</div >' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">Exportaciones</label>' +
                '<div class="progress">' +
                '<div class="progress-bar" style="width: 38%" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">' +
                '<span class="visually-hidden">38%</span>' +
                '</div>' +
                '</div>' +
                '</div >' +
                '</div >' +
                '</div>' +
                '<div class="form-group mb-4 row">' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">Retira cliente</label>' +
                '<div class="progress">' +
                '<div class="progress-bar" style="width: 38%" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">' +
                '<span class="visually-hidden">38%</span>' +
                '</div>' +
                '</div>' +
                '</div >' +
                '</div >'
        }
        if (this.value == 2) {

            container.innerHTML = '<div class="form-group mb-4">' +
                '<div class="col-6 col-sm-6">' +
                '<label class="form-label col-form-label">Total de líneas planificadas</label>' +
                '<div class="progress">' +
                '{% if sum_lineas > 0 %}' +
                '<div class="progress-bar bg-teal" style="width: {{prc_exitosas}}%" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">' +
                '<span class="text-dark text-h3">{{lineas_exitosas}}/{{sum_lineas}} ({{prc_exitosas}}%)</span>' +
                '{% else %}' +
                '<div class="progress-bar" style="width:100%;background-color: #e6e8e9"" role="progressbar" aria-valuenow="38" aria-valuemin="0" aria-valuemax="100">' +
                '<span class="text-dark text-h3">0/0 (0%)</span>' +
                '{% endif %}' +
                '</div >' +
                '</div >' +

                '</div >' +
                '</div >' +

                '<div class="form-group mb-4 row">' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">1STOCK_R</label>' +
                '<div class="progress">' +
                '{% if cant_exitosas_stock_r >= 1 %}' +
                '<div class="progress-bar bg-teal" style="width: {{prc_exitosas_stock_r}}%" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_stock_r}}/{{cant_stock_r}} ({{prc_exitosas_stock_r}}%)</span>' +
                '{% else %}' +
                '<div class="progress-bar" style="width:100%; background-color: #e6e8e9" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_stock_r}}/{{cant_stock_r}} ({{prc_exitosas_stock_r}}%)</span>' +
                '{% endif %}' +
                '</div>' +
                '</div>' +
                '</div>' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">1STOCK</label>' +
                '<div class="progress">' +
                '{% if cant_exitosas_stock >= 1 %}' +
                '<div class="progress-bar bg-teal" style="width: {{prc_exitosas_stock}}%" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_stock}}/{{cant_stock}} ({{prc_exitosas_stock}}%)</span>' +
                '{% else %}' +
                '<div class="progress-bar" style="width:100%; background-color: #e6e8e9" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_stock}}/{{cant_stock}} ({{prc_exitosas_stock}}%)</span>' +
                '{% endif %}' +
                '</div>' +
                '</div>' +
                '</div>' +
                '</div>' +
                '<div class="form-group mb-4 row">' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">2CALZADO</label>' +
                '<div class="progress">' +
                '{% if cant_exitosas_calzado >= 1 %}' +
                '<div class="progress-bar bg-teal" style="width: {{prc_exitosas_calzado}}%" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_calzado}}/{{cant_calzado}} ({{prc_exitosas_calzado}}%)</span>' +
                '{% else %}' +
                '<div class="progress-bar" style="width:100%; background-color: #e6e8e9" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_calzado}}/{{cant_calzado}} ({{prc_exitosas_calzado}}%)</span>' +
                '{% endif %}' +
                '</div>' +
                '</div>' +
                '</div >' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label"> 2LIQUID</label>' +
                '<div class="progress">' +
                '{% if cant_exitosas_liquid >= 1 %}' +
                '<div class="progress-bar bg-teal" style="width: {{prc_exitosas_liquid}}%" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_liquid}}/{{cant_liquida}} ({{prc_exitosas_liquid}}%)</span>' +
                '{% else %}' +
                '<div class="progress-bar" style="width:100%; background-color: #e6e8e9" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_liquid}}/{{cant_liquida}} ({{prc_exitosas_liquid}}%)</span>' +
                '{% endif %}' +
                '</div>' +
                '</div>' +
                '</div >' +
                '</div >' +
                '</div>' +
                '<div class="form-group mb-4 row">' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">2PROYECT</label>' +
                '<div class="progress">' +
                '{% if cant_exitosas_proyect >= 1 %}' +
                '<div class="progress-bar bg-teal" style="width: {{prc_exitosas_proyect}}%" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_proyect}}/{{cant_proyect}} ({{prc_exitosas_proyect}}%)</span>' +
                '{% else %}' +
                '<div class="progress-bar" style="width:100%; background-color: #e6e8e9" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_proyect}}/{{cant_proyect}} ({{prc_exitosas_proyect}}%)</span>' +
                '{% endif %}' +
                '</div>' +
                '</div>' +
                '</div>' +
                '<div class="col-6 col-sm-3">' +
                '<label class="form-label col-form-label">OS</label>' +
                '<div class="progress">' +
                '{% if cant_exitosas_os >= 1 %}' +
                '<div class="progress-bar bg-teal" style="width: {{prc_exitosas_os}}%" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_os}}/{{cant_os}} ({{prc_exitosas_os}}%)</span>' +
                '{% else %}' +
                '<div class="progress-bar" style="width:100%; background-color: #e6e8e9" role="progressbar" aria-valuenow="38" aria - valuemin="0" aria - valuemax="100">' +
                '<span class="text-dark text-h3">{{cant_exitosas_os}}/{{cant_os}} ({{prc_exitosas_os}}%)</span>' +
                '{% endif %}' +
                '</div>' +
                '</div>' +
                '</div >' +
                '</div >'

        }
    })
</script>

<script>
    $('#select-reporte').on('change', function (e) {
        var a = '{{cumplimiento_1stock|tojson}}'

        alert(a)
        const content = document.getElementById("reportes-card")
        content.style.display = "flex"
        if (this.value == 2) {
            const content = document.getElementById("chart-demo-line")
            content.innerHTML = ''

            window.ApexCharts && (new ApexCharts(document.getElementById('chart-demo-line'), {
                chart: {
                    type: "line",
                    fontFamily: 'inherit',
                    height: 240,
                    parentHeightOffset: 0,
                    toolbar: {
                        show: false,
                    },
                    animations: {
                        enabled: false
                    },
                },
                fill: {
                    opacity: 1,
                },
                stroke: {
                    width: 2,
                    lineCap: "round",
                    curve: "straight",
                },
                series: [{
                    name: "Session Duration",
                    data: [1]
                }, {
                    name: "Page Views",
                    data: [59, 80, 61, 66, 70, 84, 87, 64, 94, 56, 55, 67]
                }, {
                    name: "Total Visits",
                    data: [53, 51, 52, 41, 46, 60, 45, 43, 30, 50, 58, 59]
                }],
                grid: {
                    padding: {
                        top: -20,
                        right: 0,
                        left: -4,
                        bottom: -4
                    },
                    strokeDashArray: 4,
                },
                xaxis: {
                    labels: {
                        padding: 0,
                    },
                    tooltip: {
                        enabled: false
                    },
                    type: 'datetime',
                },
                yaxis: {
                    labels: {
                        padding: 4
                    },
                },
                labels: [
                    '2020-06-21', '2020-06-22', '2020-06-23', '2020-06-24', '2020-06-25', '2020-06-26', '2020-06-27', '2020-06-28', '2020-06-29', '2020-06-30', '2020-07-01', '2020-07-02'
                ],
                colors: ["#fab005", "#5eba00", "#206bc4"],
                legend: {
                    show: true,
                    position: 'bottom',
                    offsetY: 12,
                    markers: {
                        width: 10,
                        height: 10,
                        radius: 100,
                    },
                    itemMargin: {
                        horizontal: 8,
                        vertical: 8
                    },
                },
            })).render();
        }
    });
</script>

<!-- <script>
    $(document).ready(function () {
        $('#btn-guardar').on('click', function (e) {
            e.preventDefault();
            $.post('/', {
                test_value: "TEST"
            })
        })
    })
</script> -->

{% if error %}
<script type="text/javascript">
    $(document).ready(function () {
        $("#modal-error-indicadores").modal('show');
        var a = "{{detalles}}";
        alert(a)
    });
</script>
{% endif %}

<script>
    const e = document.getElementById('nav-item-indicadores')
    e.classList.add('active')

</script>
{% endblock %}